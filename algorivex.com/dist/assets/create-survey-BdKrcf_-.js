import{z as r,r as f,u as y,a as v,j as e,C,b,c as g,d as S,F as w,e as a,f as n,g as l,h as o,I as N,i as c,B as x,k as F,l as P,t as T,m as _,n as Q}from"./index-D3LCZJLf.js";import{T as k}from"./textarea-ChBnYX72.js";import{P as q,a as D,f as u,C as E,b as I,c as M,S as B,d as z}from"./survey-questions-B-U6X_TI.js";import"./select-r8TYMsx_.js";import"./trash-DxQnSnSb.js";const A=r.object({title:r.string(),description:r.string(),expire_date:r.date().nullable(),status:r.boolean()}),W=()=>{const[d,m]=f.useState([]),h=y(),t=v({resolver:T(A),defaultValues:{title:"",description:"",expire_date:null,status:!1}});function j(s){m(s)}async function p(s){const i={...s,expire_date:s.expire_date?u(s.expire_date,"yyyy-MM-dd hh:mm:ss"):null,questions:d};(await _.post("survey",i)).status===201&&(h.invalidateQueries({queryKey:["surveys"]}),Q.navigate("/surveys"))}return e.jsx("div",{className:"flex w-full h-full items-center justify-center p-2",children:e.jsxs(C,{className:"max-w-lg w-full self-center",children:[e.jsx(b,{className:"items-center",children:e.jsx(g,{className:"text-4xl",children:"New Survey"})}),e.jsx(S,{children:e.jsx(w,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(p),className:"space-y-8",children:[e.jsx(a,{control:t.control,name:"title",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Survey Title"}),e.jsx(o,{children:e.jsx(N,{placeholder:"Title",...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:t.control,name:"description",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Password"}),e.jsx(o,{children:e.jsx(k,{placeholder:"description",...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:t.control,name:"expire_date",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(l,{children:"Expire Date"}),e.jsxs(q,{children:[e.jsx(D,{asChild:!0,children:e.jsx(o,{children:e.jsxs(x,{variant:"outline",className:F("w-full pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?u(s.value,"PPP"):e.jsx("span",{children:"Survey's expire date."}),e.jsx(E,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(I,{className:"w-auto p-0",align:"start",children:e.jsx(M,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:i=>i<new Date,initialFocus:!0})})]}),e.jsx(c,{})]})}),e.jsx(a,{control:t.control,name:"status",render:({field:s})=>e.jsxs(n,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{className:"text-base",children:"Active"}),e.jsx(P,{children:"Wether to make the survey publicly available"})]}),e.jsx(o,{children:e.jsx(B,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsx("div",{children:e.jsx(z,{onQuestionsUpdate:j,questions:d})}),e.jsx(x,{type:"submit",children:"Submit"})]})})})]})})};export{W as default};
