import{w as S,r as i,x as E,K as G,j as e,P as g,y as k,A as D,a1 as F,k as C,a2 as ne,a3 as O,a4 as ce,a5 as ie,a6 as de,a7 as le,a8 as w,I as ue,a9 as pe,m as A,B as fe}from"./index-9mv0qMpi.js";import{u as L,S as xe,a as me,b as he,c as ve,f as be}from"./select-C07YNCzX.js";import{T as ye}from"./textarea-K-DxoW1C.js";var P="Checkbox",[je,Te]=S(P),[Re,ke]=je(P),M=i.forwardRef((s,o)=>{const{__scopeCheckbox:r,name:a,checked:n,defaultChecked:t,required:c,disabled:u,value:p="on",onCheckedChange:m,...l}=s,[d,x]=i.useState(null),f=E(o,b=>x(b)),h=i.useRef(!1),v=d?!!d.closest("form"):!0,[y=!1,N]=G({prop:n,defaultProp:t,onChange:m}),oe=i.useRef(y);return i.useEffect(()=>{const b=d==null?void 0:d.form;if(b){const R=()=>N(oe.current);return b.addEventListener("reset",R),()=>b.removeEventListener("reset",R)}},[d,N]),e.jsxs(Re,{scope:r,state:y,disabled:u,children:[e.jsx(g.button,{type:"button",role:"checkbox","aria-checked":j(y)?"mixed":y,"aria-required":c,"data-state":B(y),"data-disabled":u?"":void 0,disabled:u,value:p,...l,ref:f,onKeyDown:k(s.onKeyDown,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:k(s.onClick,b=>{N(R=>j(R)?!0:!R),v&&(h.current=b.isPropagationStopped(),h.current||b.stopPropagation())})}),v&&e.jsx(ge,{control:d,bubbles:!h.current,name:a,value:p,checked:y,required:c,disabled:u,style:{transform:"translateX(-100%)"}})]})});M.displayName=P;var T="CheckboxIndicator",$=i.forwardRef((s,o)=>{const{__scopeCheckbox:r,forceMount:a,...n}=s,t=ke(T,r);return e.jsx(D,{present:a||j(t.state)||t.state===!0,children:e.jsx(g.span,{"data-state":B(t.state),"data-disabled":t.disabled?"":void 0,...n,ref:o,style:{pointerEvents:"none",...s.style}})})});$.displayName=T;var ge=s=>{const{control:o,checked:r,bubbles:a=!0,...n}=s,t=i.useRef(null),c=L(r),u=F(o);return i.useEffect(()=>{const p=t.current,m=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==r&&d){const x=new Event("click",{bubbles:a});p.indeterminate=j(r),d.call(p,j(r)?!1:r),p.dispatchEvent(x)}},[c,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:j(r)?!1:r,...n,tabIndex:-1,ref:t,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function j(s){return s==="indeterminate"}function B(s){return j(s)?"indeterminate":s?"checked":"unchecked"}var K=M,Ce=$;const V=i.forwardRef(({className:s,...o},r)=>e.jsx(K,{ref:r,className:C("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...o,children:e.jsx(Ce,{className:C("flex items-center justify-center text-current"),children:e.jsx(ne,{className:"h-4 w-4"})})}));V.displayName=K.displayName;var I="Radio",[Ne,H]=S(I),[we,Se]=Ne(I),z=i.forwardRef((s,o)=>{const{__scopeRadio:r,name:a,checked:n=!1,required:t,disabled:c,value:u="on",onCheck:p,...m}=s,[l,d]=i.useState(null),x=E(o,v=>d(v)),f=i.useRef(!1),h=l?!!l.closest("form"):!0;return e.jsxs(we,{scope:r,checked:n,disabled:c,children:[e.jsx(g.button,{type:"button",role:"radio","aria-checked":n,"data-state":q(n),"data-disabled":c?"":void 0,disabled:c,value:u,...m,ref:x,onClick:k(s.onClick,v=>{n||p==null||p(),h&&(f.current=v.isPropagationStopped(),f.current||v.stopPropagation())})}),h&&e.jsx(Ee,{control:l,bubbles:!f.current,name:a,value:u,checked:n,required:t,disabled:c,style:{transform:"translateX(-100%)"}})]})});z.displayName=I;var U="RadioIndicator",X=i.forwardRef((s,o)=>{const{__scopeRadio:r,forceMount:a,...n}=s,t=Se(U,r);return e.jsx(D,{present:a||t.checked,children:e.jsx(g.span,{"data-state":q(t.checked),"data-disabled":t.disabled?"":void 0,...n,ref:o})})});X.displayName=U;var Ee=s=>{const{control:o,checked:r,bubbles:a=!0,...n}=s,t=i.useRef(null),c=L(r),u=F(o);return i.useEffect(()=>{const p=t.current,m=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==r&&d){const x=new Event("click",{bubbles:a});d.call(p,r),p.dispatchEvent(x)}},[c,r,a]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:t,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function q(s){return s?"checked":"unchecked"}var Pe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],_="RadioGroup",[Ie,$e]=S(_,[O,H]),Q=O(),W=H(),[_e,Ae]=Ie(_),Y=i.forwardRef((s,o)=>{const{__scopeRadioGroup:r,name:a,defaultValue:n,value:t,required:c=!1,disabled:u=!1,orientation:p,dir:m,loop:l=!0,onValueChange:d,...x}=s,f=Q(r),h=ce(m),[v,y]=G({prop:t,defaultProp:n,onChange:d});return e.jsx(_e,{scope:r,name:a,required:c,disabled:u,value:v,onValueChange:y,children:e.jsx(ie,{asChild:!0,...f,orientation:p,dir:h,loop:l,children:e.jsx(g.div,{role:"radiogroup","aria-required":c,"aria-orientation":p,"data-disabled":u?"":void 0,dir:h,...x,ref:o})})})});Y.displayName=_;var J="RadioGroupItem",Z=i.forwardRef((s,o)=>{const{__scopeRadioGroup:r,disabled:a,...n}=s,t=Ae(J,r),c=t.disabled||a,u=Q(r),p=W(r),m=i.useRef(null),l=E(o,m),d=t.value===n.value,x=i.useRef(!1);return i.useEffect(()=>{const f=v=>{Pe.includes(v.key)&&(x.current=!0)},h=()=>x.current=!1;return document.addEventListener("keydown",f),document.addEventListener("keyup",h),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",h)}},[]),e.jsx(de,{asChild:!0,...u,focusable:!c,active:d,children:e.jsx(z,{disabled:c,required:t.required,checked:d,...p,...n,name:t.name,ref:l,onCheck:()=>t.onValueChange(n.value),onKeyDown:k(f=>{f.key==="Enter"&&f.preventDefault()}),onFocus:k(n.onFocus,()=>{var f;x.current&&((f=m.current)==null||f.click())})})})});Z.displayName=J;var Ge="RadioGroupIndicator",ee=i.forwardRef((s,o)=>{const{__scopeRadioGroup:r,...a}=s,n=W(r);return e.jsx(X,{...n,...a,ref:o})});ee.displayName=Ge;var te=Y,se=Z,De=ee;const re=i.forwardRef(({className:s,...o},r)=>e.jsx(te,{className:C("grid gap-2",s),...o,ref:r}));re.displayName=te.displayName;const ae=i.forwardRef(({className:s,...o},r)=>e.jsx(se,{ref:r,className:C("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...o,children:e.jsx(De,{className:"flex items-center justify-center",children:e.jsx(le,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ae.displayName=se.displayName;function Fe({question:s,index:o,answerChanged:r}){let a=[];function n(t,c){c?a.push(t.text):a=a.filter(u=>u!=t.text),r(a)}return e.jsxs(e.Fragment,{children:[e.jsxs("fieldset",{className:"mb-4",children:[e.jsxs("div",{children:[e.jsxs(w,{className:"text-lg",children:[o+1,". ",s.question]}),e.jsx("p",{children:s.description})]}),e.jsxs("div",{className:"mt-3",children:[s.type==="select"&&e.jsx("div",{children:e.jsxs(xe,{name:"questionType",onValueChange:t=>r(t),children:[e.jsx(me,{className:"w-64",children:e.jsx(he,{placeholder:"Answer"})}),e.jsx(ve,{children:s.data.options.map(t=>e.jsx(be,{value:t.text,children:t.text},t.uuid))})]})}),s.type==="radio"&&e.jsx("div",{children:e.jsx(re,{onValueChange:t=>{r(t)},children:s.data.options.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{id:t.uuid,value:t.text}),e.jsx(w,{htmlFor:t.uuid,children:t.text})]},t.uuid))})}),s.type==="checkbox"&&e.jsx("div",{children:s.data.options.map(t=>e.jsxs("div",{className:"flex items-center space-x-2 my-2",children:[e.jsx(V,{id:t.uuid,onCheckedChange:c=>n(t,c)}),e.jsx(w,{htmlFor:t.uuid,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.text})]},t.uuid))}),s.type==="text"&&e.jsx("div",{children:e.jsx(ue,{type:"text",onChange:t=>r(t.target.value),className:"mt-1 "})}),s.type==="textarea"&&e.jsx("div",{children:e.jsx(ye,{onChange:t=>r(t.target.value),className:"mt-1 "})})]})]}),e.jsx("hr",{className:"mb-4"})]})}function Be(){const s={},[o,r]=i.useState(!1),[a,n]=i.useState({questions:[]}),[t,c]=i.useState(!1),{slug:u}=pe();i.useEffect(()=>{c(!0),A.get(`survey/public/${u}`).then(({data:l})=>{c(!1),n(l.data)}).catch(()=>{c(!1)})},[]);function p(l,d){s[l.id]=d}function m(l){l.preventDefault(),A.post(`/survey/${a.id}/answer`,{answers:s}).then(d=>{r(!0)})}return e.jsxs("div",{children:[t&&e.jsx("div",{className:"flex justify-center",children:"Loading.."}),!t&&e.jsxs("form",{onSubmit:l=>m(l),className:"container mx-auto p-4",children:[e.jsx("div",{className:"grid grid-cols-6",children:e.jsxs("div",{className:"col-span-5",children:[e.jsx("h1",{className:"text-3xl mb-3",children:a.title}),e.jsxs("p",{className:" text-sm mb-3",children:["Expire Date: ",a.expire_date]}),e.jsx("p",{className:"  mb-3",children:a.description})]})}),o&&e.jsx("div",{className:"h-full w-full flex items-center justify-center text-2xl",children:"Thank you for participating in the survey"}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:a.questions.map((l,d)=>e.jsx(Fe,{question:l,index:d,answerChanged:x=>p(l,x)},l.id))}),e.jsx(fe,{type:"submit",children:"Submit"})]})]})]})}export{Be as default};
