import{z as o,o as p,a as u,j as s,C as f,b as w,c as g,d as b,F,e as i,f as c,g as l,h as m,I as d,i as x,B as y,L as C,t as N,m as S,N as _}from"./index-D3LCZJLf.js";const v=o.object({name:o.string().min(4,{message:"Username must be at least 4 characters."}).max(32,{message:"Username can be at most 32 characters."}),email:o.string().email({message:"Invalid email address"}),password:o.string().min(8,{message:"Password must be at least 8 characters."}).max(256,{message:"Password can be at most 256 characters."}),password_confirmation:o.string()}).refine(n=>n.password===n.password_confirmation,{message:"Passwords don't match",path:["password_confirmation"]}),P=()=>{const{setAuthToken:n,setCurrentUser:h}=p(),e=u({resolver:N(v),defaultValues:{name:"",email:"",password:"",password_confirmation:""}});async function j(r){try{const a=await S.post("auth/register",r),t=await a.data;if(a.status===200)return h(t.user),n(t.token),s.jsx(_,{to:"/dashboard"})}catch(a){a.response&&(e.resetField("password"),e.resetField("password_confirmation"),Object.keys(a.response.data.errors).forEach(t=>{e.setError(t,{type:"server-error",message:a.response.data.errors[t][0]})})),console.error(a)}}return s.jsxs(f,{className:"max-w-lg w-full self-center",children:[s.jsx(w,{className:"items-center",children:s.jsx(g,{className:"text-4xl",children:"Register"})}),s.jsx(b,{children:s.jsx(F,{...e,children:s.jsxs("form",{onSubmit:e.handleSubmit(j),className:"space-y-8",children:[s.jsx(i,{control:e.control,name:"name",render:({field:r})=>s.jsxs(c,{children:[s.jsx(l,{children:"Username"}),s.jsx(m,{children:s.jsx(d,{placeholder:"Username",...r})}),s.jsx(x,{})]})}),s.jsx(i,{control:e.control,name:"email",render:({field:r})=>s.jsxs(c,{children:[s.jsx(l,{children:"Email"}),s.jsx(m,{children:s.jsx(d,{placeholder:"you@example.com",...r})}),s.jsx(x,{})]})}),s.jsx(i,{control:e.control,name:"password",render:({field:r})=>s.jsxs(c,{children:[s.jsx(l,{children:"Password"}),s.jsx(m,{children:s.jsx(d,{type:"password",placeholder:"********",...r})}),s.jsx(x,{})]})}),s.jsx(i,{control:e.control,name:"password_confirmation",render:({field:r})=>s.jsxs(c,{children:[s.jsx(l,{children:"Confirm Password"}),s.jsx(m,{children:s.jsx(d,{type:"password",placeholder:"********",...r})}),s.jsx(x,{})]})}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx(y,{disabled:e.formState.isLoading,type:"submit",children:"Submit"}),s.jsxs("p",{className:"flex items-center",children:["Already a user?",s.jsx(C,{to:"/login",className:"text-blue-500 ml-1",children:"Login"})]})]})]})})})]})};export{P as default};
